<div class="like-button-wrapper">
  <% if user_signed_in? %>
    <%= react_component('LikeButton',
                        { liked: current_user.liked?(post),
                          likeCount: post.likes.size,
                          likeEndpoint: api_post_likes_path(post),
                          unlikeEndpoint: api_post_likes_path(post),
                          likeableType: 'Post',
                          likeableId: post.id }) %>
  <% else %>
    <%= button_to '', method: :get, class: 'like-button', data: { behavior: 'trigger-overlay' } do %>
      <span class="icon-heart-o"></span><span class="hide-text">Like</span>
    <% end %>
  <% end %>
  <span class="like-count"><%= post.likes.size %></span>
</div>
<% if post.reload.likes.size > 0 %>
  <% if user_signed_in? %>
    <span class="like-count">
      <%= react_component('OverlayTriggerButton', { text: post.reload.likes.size.to_s, overlayHeading: "People liked '#{post.title}'", apiEndpoint: api_likers_path(post_id: post.id) }) %>
    </span>
  <% else %>
  <% end %>
<% end %>